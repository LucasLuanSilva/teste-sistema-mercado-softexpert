import{M as f,a as _,b as n}from"./MoneyInput-D8iU4Hhc.js";import{_ as M,r as v,c as l,b as t,w as m,v as h,d as C,F as b,e as y,o as r,t as p,p as I,a as k}from"./index-BsSQaGFC.js";const S={components:{MoneyInput:f},data(){return{colunas:["Código","Descrição","Imposto"],tipos:[],tipoSelecionado:{},tipoModal:{codigo:"",descricao:"",imposto:0},myModal:null}},mounted(){this.carregaTipos(),this.myModal=new _(document.getElementById("cadastroTipoProduto"),{keyboard:!1})},methods:{cliqueTipo(i,o){var d=document.getElementsByTagName("tr");Array.prototype.forEach.call(d,function(u){u.classList.remove("selected")}),i.target.parentNode.classList.add("selected"),this.tipoSelecionado=o},async carregaTipos(){var i=document.getElementsByTagName("tr");Array.prototype.forEach.call(i,function(o){o.classList.remove("selected")}),this.tipoSelecionado={},await n.get("http://localhost:8080/tipo/produto").then(o=>{console.log(o.data),this.tipos=o.data}).catch(o=>{console.log(o)})},abrirAlterarTipo(){if(Object.keys(this.tipoSelecionado).length===0){alert("Selecione um tipo!");return}this.tipoModal=Object.assign({},this.tipoSelecionado),this.myModal.show()},abrirIncluirTipo(){this.tipoModal={codigo:"",descricao:"",imposto:0},this.myModal.show()},async alterarTipo(){let i=this.validaCamposTipo(this.tipoModal.descricao,this.tipoModal.imposto);if(i!=""){alert(i);return}await n.put("http://localhost:8080/tipo/produto",this.tipoModal).then(o=>{this.myModal.hide(),alert("Tipo alterado com sucesso!"),this.carregaTipos()}).catch(o=>{console.log(o)})},validaCamposTipo(i,o){let d="";return i.trim()==""?d="Informe um descrição.":(!(o>=0)||o==null||o=="")&&(d="Informe um imposto."),d},async incluirTipo(){let i=this.validaCamposTipo(this.tipoModal.descricao,this.tipoModal.imposto);if(i!=""){alert(i);return}await n.post("http://localhost:8080/tipo/produto",this.tipoModal).then(o=>{this.myModal.hide(),alert("Tipo incluido com sucesso!"),this.carregaTipos()}).catch(o=>{console.log(o)})},async excluirTipo(){if(Object.keys(this.tipoSelecionado).length===0){alert("Selecione um tipo!");return}await n.delete("http://localhost:8080/tipo/produto",{params:{codigo:this.tipoSelecionado.codigo}}).then(i=>{this.myModal.hide(),alert("Tipo excluído com sucesso!"),this.carregaTipos()}).catch(i=>{console.log(i)})},formatarValor(i){return Number(i).toLocaleString("pt-br",{maximumFractionDigits:2,minimumFractionDigits:2})}}},c=i=>(I("data-v-65cfbe96"),i=i(),k(),i),x={class:"tipoProduto"},D={class:"modal fade",id:"cadastroTipoProduto","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"cadastroTipoProdutoLabel","aria-hidden":"true"},w={class:"modal-dialog"},V={class:"modal-content"},B=c(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"cadastroTipoProdutoLabel"},"Cadastro Tipo Produto"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),E={class:"modal-body"},L={class:"row"},P={class:"col-12"},A=c(()=>t("label",{for:"inputCodigo"},"Código",-1)),F={class:"col-12"},N=c(()=>t("label",{for:"inputDescricao"},"Descrição",-1)),U={class:"col-12"},j=c(()=>t("label",{for:"inputImposto"},"Imposto",-1)),O={class:"modal-footer"},q=c(()=>t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cancelar",-1)),R=c(()=>t("h3",null,"Tipos",-1)),z={id:"gridTipos",class:"table table-default border"},G={scope:"col"},H=["onClick"];function J(i,o,d,u,a,s){const g=v("MoneyInput");return r(),l("div",x,[t("div",D,[t("div",w,[t("div",V,[B,t("div",E,[t("div",L,[t("div",P,[A,m(t("input",{id:"inputCodigo",type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>a.tipoModal.codigo=e),disabled:""},null,512),[[h,a.tipoModal.codigo]])]),t("div",F,[N,m(t("input",{id:"inputDescricao",type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=e=>a.tipoModal.descricao=e)},null,512),[[h,a.tipoModal.descricao]])]),t("div",U,[j,C(g,{id:"inputImposto",class:"form-control",modelValue:a.tipoModal.imposto,"onUpdate:modelValue":o[2]||(o[2]=e=>a.tipoModal.imposto=e),value:a.tipoModal.imposto,options:{locale:"pt-BR",currency:"USD",currencyDisplay:"hidden",precision:2,autoDecimalDigits:!0}},null,8,["modelValue","value"])])])]),t("div",O,[q,a.tipoModal.codigo>0?(r(),l("button",{key:0,onClick:o[3]||(o[3]=(...e)=>s.alterarTipo&&s.alterarTipo(...e)),type:"button",class:"btn btn-success"},"Confirmar")):(r(),l("button",{key:1,type:"button",onClick:o[4]||(o[4]=(...e)=>s.incluirTipo&&s.incluirTipo(...e)),class:"btn btn-success"},"Confirmar"))])])])]),R,t("table",z,[t("thead",null,[t("tr",null,[(r(!0),l(b,null,y(a.colunas,e=>(r(),l("th",G,p(e),1))),256))])]),t("tbody",null,[(r(!0),l(b,null,y(a.tipos,e=>(r(),l("tr",{onClick:T=>s.cliqueTipo(T,e)},[t("td",null,p(e.codigo),1),t("td",null,p(e.descricao),1),t("td",null,p(s.formatarValor(e.imposto)),1)],8,H))),256))])]),t("button",{onClick:o[5]||(o[5]=(...e)=>s.abrirIncluirTipo&&s.abrirIncluirTipo(...e)),type:"button",class:"btn btn-success me-3"}," Incluir "),t("button",{onClick:o[6]||(o[6]=(...e)=>s.abrirAlterarTipo&&s.abrirAlterarTipo(...e)),type:"button",class:"btn btn-primary me-3"}," Alterar "),t("button",{onClick:o[7]||(o[7]=(...e)=>s.excluirTipo&&s.excluirTipo(...e)),type:"button",class:"btn btn-danger"}," Excluir ")])}const W=M(S,[["render",J],["__scopeId","data-v-65cfbe96"]]);export{W as default};
