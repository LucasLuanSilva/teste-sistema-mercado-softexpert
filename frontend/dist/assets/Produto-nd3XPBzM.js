import{M as f,a as y,b as n}from"./MoneyInput-D8iU4Hhc.js";import{_ as v,r as M,c as d,b as t,w as p,v as b,f as P,F as m,e as h,d as C,o as a,t as u}from"./index-BsSQaGFC.js";const k={components:{MoneyInput:f},data(){return{colunas:["Código","Descrição","Valor"],produtos:[],produtoSelecionado:{},produtoModal:{codigo:"",descricao:"",valor:0,codigo_tipo:0},tipos:[],myModal:null}},mounted(){this.carregaProdutos(),this.myModal=new y(document.getElementById("cadastroProduto"),{keyboard:!1}),this.carregaTipos()},methods:{cliqueProduto(r,o){var i=document.getElementsByTagName("tr");Array.prototype.forEach.call(i,function(c){c.classList.remove("selected")}),r.target.parentNode.classList.add("selected"),this.produtoSelecionado=o},carregaProdutos(){var r=document.getElementsByTagName("tr");Array.prototype.forEach.call(r,function(o){o.classList.remove("selected")}),this.produtoSelecionado={},n.get("http://localhost:8080/produto").then(o=>{this.produtos=o.data}).catch(o=>{console.log(o)})},carregaTipos(){n.get("http://localhost:8080/tipo/produto").then(r=>{this.tipos=r.data}).catch(r=>{console.log(r)})},abrirAlterarProduto(){if(Object.keys(this.produtoSelecionado).length===0){alert("Selecione um produto!");return}this.produtoModal=Object.assign({},this.produtoSelecionado),this.myModal.show()},abrirIncluirProduto(){this.produtoModal={codigo:"",descricao:"",valor:0,codigo_tipo:0},this.myModal.show()},alterarProduto(){let r=this.validaCamposProduto(this.produtoModal.descricao,this.produtoModal.codigo_tipo,this.produtoModal.valor);if(r!=""){alert(r);return}n.put("http://localhost:8080/produto",this.produtoModal).then(o=>{this.myModal.hide(),alert("Produto alterado com sucesso!"),this.carregaProdutos()}).catch(o=>{console.log(o)})},validaCamposProduto(r,o,i){let c="";return console.log(i),r.trim()==""?c="Informe um descrição.":o>0?(!(i>0)||i==null||i=="")&&(c="Informe um valor."):c="Informe um tipo.",c},incluirProduto(){let r=this.validaCamposProduto(this.produtoModal.descricao,this.produtoModal.codigo_tipo,this.produtoModal.valor);if(r!=""){alert(r);return}n.post("http://localhost:8080/produto",this.produtoModal).then(o=>{this.myModal.hide(),alert("Produto incluido com sucesso!"),this.carregaProdutos()}).catch(o=>{console.log(o)})},excluirProduto(){if(Object.keys(this.produtoSelecionado).length===0){alert("Selecione um produto!");return}n.delete("http://localhost:8080/produto",{params:{codigo:this.produtoSelecionado.codigo}}).then(r=>{this.myModal.hide(),alert("Produto excluído com sucesso!"),this.carregaProdutos()}).catch(r=>{console.log(r)})},formatarValor(r){return Number(r).toLocaleString("pt-br",{maximumFractionDigits:2,minimumFractionDigits:2})}}},x={class:"produto"},V={class:"modal fade",id:"cadastroProduto","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"cadastroProdutoLabel","aria-hidden":"true"},S={class:"modal-dialog"},D={class:"modal-content"},I=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"cadastroProdutoLabel"},"Cadastro Produto"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),T={class:"modal-body"},B={class:"row"},E={class:"col-12"},L=t("label",{for:"inputCodigo"},"Código",-1),w={class:"col-12"},A=t("label",{for:"inputDescricao"},"Descrição",-1),F={class:"col-12"},N=t("label",{for:"selectTipo"},"Tipo",-1),U=t("option",{value:"0",selected:""},null,-1),j=["value"],O={class:"col-12"},q=t("label",{for:"inputValor"},"Valor",-1),R={class:"modal-footer"},z=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cancelar",-1),G=t("h3",null,"Produtos",-1),H={class:"table table-default border"},J={scope:"col"},K=["onClick"];function Q(r,o,i,c,l,s){const g=M("MoneyInput");return a(),d("div",x,[t("div",V,[t("div",S,[t("div",D,[I,t("div",T,[t("div",B,[t("div",E,[L,p(t("input",{id:"inputCodigo",type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>l.produtoModal.codigo=e),disabled:""},null,512),[[b,l.produtoModal.codigo]])]),t("div",w,[A,p(t("input",{id:"inputDescricao",type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=e=>l.produtoModal.descricao=e)},null,512),[[b,l.produtoModal.descricao]])]),t("div",F,[N,p(t("select",{id:"selectTipo",class:"form-select","onUpdate:modelValue":o[2]||(o[2]=e=>l.produtoModal.codigo_tipo=e)},[U,(a(!0),d(m,null,h(l.tipos,e=>(a(),d("option",{value:e.codigo},u(e.descricao),9,j))),256))],512),[[P,l.produtoModal.codigo_tipo]])]),t("div",O,[q,C(g,{id:"inputValor",class:"form-control",modelValue:l.produtoModal.valor,"onUpdate:modelValue":o[3]||(o[3]=e=>l.produtoModal.valor=e),value:l.produtoModal.valor,options:{locale:"pt-BR",currency:"USD",currencyDisplay:"hidden",precision:2,autoDecimalDigits:!0}},null,8,["modelValue","value"])])])]),t("div",R,[z,l.produtoModal.codigo>0?(a(),d("button",{key:0,onClick:o[4]||(o[4]=(...e)=>s.alterarProduto&&s.alterarProduto(...e)),type:"button",class:"btn btn-success"},"Confirmar")):(a(),d("button",{key:1,type:"button",onClick:o[5]||(o[5]=(...e)=>s.incluirProduto&&s.incluirProduto(...e)),class:"btn btn-success"},"Confirmar"))])])])]),G,t("table",H,[t("thead",null,[t("tr",null,[(a(!0),d(m,null,h(l.colunas,e=>(a(),d("th",J,u(e),1))),256))])]),t("tbody",null,[(a(!0),d(m,null,h(l.produtos,e=>(a(),d("tr",{onClick:_=>s.cliqueProduto(_,e)},[t("td",null,u(e.codigo),1),t("td",null,u(e.descricao),1),t("td",null,u(s.formatarValor(e.valor)),1)],8,K))),256))])]),t("button",{onClick:o[6]||(o[6]=(...e)=>s.abrirIncluirProduto&&s.abrirIncluirProduto(...e)),type:"button",class:"btn btn-success me-3"}," Incluir "),t("button",{onClick:o[7]||(o[7]=(...e)=>s.abrirAlterarProduto&&s.abrirAlterarProduto(...e)),type:"button",class:"btn btn-primary me-3"}," Alterar "),t("button",{onClick:o[8]||(o[8]=(...e)=>s.excluirProduto&&s.excluirProduto(...e)),type:"button",class:"btn btn-danger"}," Excluir ")])}const Y=v(k,[["render",Q]]);export{Y as default};
